#!/bin/bash

### ~/.bash_profile
### Bash login profile configuration.
###
### Author: Nathan Campos <nathan@innoveworkshop.com>

# Get which system we are currently dealing with.
OS_NAME=`(uname -s) 2>/dev/null`

# Don't put duplicate lines or lines starting with space in the history.
HISTCONTROL=ignoreboth

# Append to the history file, don't overwrite it.
shopt -s histappend

# Have a nice and long history.
HISTSIZE=10000
HISTFILESIZE=10000

# Set some sane default applications.
export EDITOR=vim
export VISUAL=${EDITOR}
export PAGER=less
export LESS=FRX

# Update the values of LINES and COLUMNS after each command if necessary.
shopt -s checkwinsize

# Setup fancyness according to capabilities.
case "$TERM" in
	"dumb")
		export PS1="$ "
		;;
	xterm*|rxvt*|eterm*|screen*)
		export PS1='\[\033[00m\][\[\033[01;33m\]\u@\h \[\033[01;34m\]\w\[\033[00m\]]\$ '
		;;
esac

# Add iTerm 2 integration.
if [ "$OS_NAME" = "Darwin" ]; then
	test -e "${HOME}/.iterm2_shell_integration.bash" && source "${HOME}/.iterm2_shell_integration.bash"
fi

# Add MacPorts to the system PATH.
if [ "$OS_NAME" = "Darwin" ]; then
	export PATH="/opt/local/bin:/opt/local/sbin:$PATH"
	export MANPATH="/opt/local/share/man:$MANPATH"
fi

# Make sure our scripts, /usr/local/bin, and /sbin are in the system PATH.
export PATH="/sbin:/usr/local/bin:$HOME/dotfiles/scripts:$PATH"

# Enable the handy tab completions.
if [ -f /usr/share/bash-completion/bash_completion ]; then
	. /usr/share/bash-completion/bash_completion
elif [ -f /etc/bash_completion ]; then
	. /etc/bash_completion
elif [ -r /opt/local/share/bash-completion/bash_completion ]; then
	. /opt/local/share/bash-completion/bash_completion
fi

# Setup aliases.
if [ -f ~/.bash_aliases ]; then
	. ~/.bash_aliases
fi

# Load up the computer-specific Bash configuration.
if [ -f ~/.bashrc ]; then
	. ~/.bashrc
fi

# Setup some pretty things if we aren't in a dumb terminal.
if [ "$TERM" != "dumb" ]; then
	# Show a pretty welcome message.
	if [ -x "$(command -v neofetch)" ]; then
		neofetch
	fi
fi

